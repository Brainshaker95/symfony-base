{%- set lazyload = lazyload is defined ? lazyload : true -%}
{%- set thumbnail = thumbnail is defined ? thumbnail : 'default' -%}
{%- set class = class is defined ? class : '' -%}
{%- set class = not non_responsive|default ? class ~ ' responsive-image' : class -%}
{%- set image = image|instanceof('App\\Entity\\Image') ? image.getPath : image -%}
{%- set is_svg = image|slice(image|length - 3, 3) == 'svg' -%}

{%- apply strip_spaces -%}
  <img
    src="{{- is_svg ? image : (lazyload ? image|imagine_filter('preview', thumbnail|get_liip_config) : image|imagine_filter(thumbnail)) -}}"
    {%- if lazyload -%}
      data-src="{{- image|imagine_filter(thumbnail) -}}"
    {%- endif -%}
    class="{{- class|trim -}}{{- lazyload ? ' lazyload' : '' -}}"
    alt="{{- alt|default -}}"
    title="{{- title|default -}}"
  >
{%- endapply -%}
